DROP TABLE IF EXISTS images, posts, tags, comments, likes;

CREATE TABLE IF NOT EXISTS images (
    image_id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    image_data BLOB NOT NULL,
    image_name VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS posts (
    post_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    image_id BIGINT NOT NULL REFERENCES images(image_id),
    post_name VARCHAR(255) NOT NULL,
    post_text VARCHAR(9000) NOT NULL
);

CREATE TABLE IF NOT EXISTS tags (
    tag_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    tag_text VARCHAR(255) NOT NULL,
    post_id BIGINT NOT NULL REFERENCES posts(post_id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS comments (
    comment_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    comment_text VARCHAR(255) NOT NULL,
    post_id BIGINT NOT NULL REFERENCES posts(post_id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS likes (
    like_id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    post_id BIGINT NOT NULL REFERENCES posts(post_id) ON DELETE CASCADE
);